(function(){"use strict";var e={8315:function(e,t,s){var a=s(9242),n=s(3396),o=s.p+"img/tomato.png";const l=e=>((0,n.dD)("data-v-537f89b4"),e=e(),(0,n.Cn)(),e),r={class:"navbar navbar-expand-md navbar-dark bg-dark"},i={class:"container-fluid"},c=l((()=>(0,n._)("img",{src:o,alt:"",width:"30",height:"24",class:"d-inline-block align-text-top"},null,-1))),u=l((()=>(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1))),d={class:"collapse navbar-collapse",id:"navbarSupportedContent"},p={class:"navbar-nav me-auto mb-2 mb-lg-0"},m={class:"nav-item"},h={class:"nav-item"},g={class:"nav-item"},f={class:"nav-item"},v={class:"nav-item"},b=l((()=>(0,n._)("form",{class:"d-flex",role:"login"},[(0,n._)("button",{type:"button",class:"btn btn-outline-success"},"Login"),(0,n._)("button",{type:"button",class:"btn btn-danger ms-3"},"Register")],-1)));function _(e,t,s,a,o,l){const _=(0,n.up)("router-link"),w=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("nav",r,[(0,n._)("div",i,[(0,n.Wm)(_,{to:"/",class:"navbar-brand"},{default:(0,n.w5)((()=>[c])),_:1}),u,(0,n._)("div",d,[(0,n._)("ul",p,[(0,n._)("li",m,[(0,n.Wm)(_,{to:"/",class:"nav-link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Home")])),_:1})]),(0,n._)("li",h,[(0,n.Wm)(_,{to:"/info",class:"nav-link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Info")])),_:1})]),(0,n._)("li",g,[(0,n.Wm)(_,{to:"/pumps",class:"nav-link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Pumps")])),_:1})]),(0,n._)("li",f,[(0,n.Wm)(_,{to:"/update",class:"nav-link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Update")])),_:1})]),(0,n._)("li",v,[(0,n.Wm)(_,{to:"/teste",class:"nav-link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Teste")])),_:1})])]),b])])]),(0,n.Wm)(w)],64)}var w={computed:{username(){return this.$route.params.username}}},y=s(89);const k=(0,y.Z)(w,[["render",_],["__scopeId","data-v-537f89b4"]]);var x=k,D=s(2483);function T(e,t){return(0,n.wg)(),(0,n.iD)("h1",null,"Home")}const O={},q=(0,y.Z)(O,[["render",T]]);var S=q,j=s(7139);const C={class:"container p-5"},E={class:"row align-items-center"},P={class:"col-lg-4 mb-3"},A={class:"card text-center"},W={class:"card-body"},R=(0,n._)("h5",{class:"card-title"},"Hostname",-1),H={class:"card-text"},U={class:"col-lg-4 mb-3"},z={class:"card text-center"},I={class:"card-body"},L=(0,n._)("h5",{class:"card-title"},"Time",-1),G={class:"card-text"},M={class:"col-lg-4 mb-3"},F={class:"card text-center"},Z={class:"card-body"},X=(0,n._)("h5",{class:"card-title"},"RSSI",-1),Y={class:"card-text"},$={class:"col-lg-4 mb-3"},V={class:"card text-center"},K={class:"card-body"},N=(0,n._)("h5",{class:"card-title"},"Pulse Duration 1",-1),B={class:"card-text"},J=(0,n._)("h5",{class:"card-title"},"Pulse Duration 2",-1),Q={class:"card-text"},ee={class:"row pt-5"},te={class:"col-lg-6"},se={class:"d-flex flex-column"},ae=(0,n._)("th",null,null,-1);function ne(e,t,s,a,o,l){return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("div",E,[(0,n._)("div",P,[(0,n._)("div",A,[(0,n._)("div",W,[R,(0,n._)("p",H,(0,j.zw)(e.hostname),1)])])]),(0,n._)("div",U,[(0,n._)("div",z,[(0,n._)("div",I,[L,(0,n._)("p",G,(0,j.zw)(e.time),1)])])]),(0,n._)("div",M,[(0,n._)("div",F,[(0,n._)("div",Z,[X,(0,n._)("p",Y,(0,j.zw)(e.rssi),1)])])]),(0,n._)("div",$,[(0,n._)("div",V,[(0,n._)("div",K,[N,(0,n._)("p",B,(0,j.zw)(e.pulseDuration1),1),J,(0,n._)("p",Q,(0,j.zw)(e.pulseDuration2),1)])])])]),(0,n._)("div",ee,[(0,n._)("div",te,[(0,n._)("div",se,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.tableConfigs,(t=>((0,n.wg)(),(0,n.iD)("table",{key:t.query,class:"table table-striped mb-4"},[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,(0,j.zw)(t.header),1),ae])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.tableData[t.query],((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[""!==e?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("td",null,(0,j.zw)(t),1),(0,n._)("td",null,(0,j.zw)(e),1)],64)):(0,n.kq)("",!0)])))),128))])])))),128))])])])])}var oe=s(4870),le={name:"InfoView",data(){return(0,oe.qj)({hostname:"",time:"",rssi:"",pulseDuration1:"",pulseDuration2:"",tableConfigs:[{method:"GET",url:"/timers1",query:"pump1-table",header:"Pump 1"},{method:"GET",url:"/timers2",query:"pump2-table",header:"Pump 2"}],tableData:{}})},mounted(){this.ajax({method:"GET",url:"/hostname",query:"hostname"}),setInterval((()=>this.ajax({method:"GET",url:"/time",query:"time"})),5e3),setInterval((()=>this.ajax({method:"GET",url:"/rssi",query:"rssi"})),5e3),setInterval((()=>this.ajax({method:"GET",url:"/pulse1",query:"pulseDuration1"})),5e3),setInterval((()=>this.ajax({method:"GET",url:"/pulse2",query:"pulseDuration2"})),5e3),setInterval((()=>{for(const e of this.tableConfigs)this.ajax(e)}),5e3)},methods:{ajax(e){const t=new XMLHttpRequest;t.open(e.method,e.url,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.onreadystatechange=()=>{4===t.readyState&&200===t.status&&(e.header?this.tableData[e.query]=t.responseText.split(","):this[e.query]=t.responseText)},t.send()}}};const re=(0,y.Z)(le,[["render",ne]]);var ie=re;const ce={class:"container p-5 text-center"},ue={class:"row justify-content-center"},de={class:"card mb-4"},pe={class:"card-body"},me={class:"card-title"},he={class:"card-title"},ge=(0,n._)("i",{class:"fa-solid fa-bolt"},null,-1),fe={class:"form-check form-switch d-flex justify-content-center"},ve=["id","checked","onChange"],be={class:"state mt-3"},_e={key:0},we=(0,n._)("span",{class:"box-on bg-success text-white rounded"},"ON",-1),ye=[we],ke={key:1},xe=(0,n._)("span",{class:"box-off bg-danger text-white rounded"},"OFF",-1),De=[xe];function Te(e,t,s,a,o,l){return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n._)("div",ue,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.pumps,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3",key:t},[(0,n._)("div",de,[(0,n._)("div",pe,[(0,n._)("h5",me,(0,j.zw)(e.name),1),(0,n._)("p",he,[ge,(0,n.Uk)(" GPIO "+(0,j.zw)(e.gpio),1)]),(0,n._)("div",fe,[(0,n._)("input",{class:"form-check-input form-switch-lg",type:"checkbox",role:"switch",id:e.gpio,checked:"on"===l.getState(e.gpio),onChange:()=>l.toggleCheckbox(e.gpio)},null,40,ve)]),(0,n._)("p",be,[(0,n.Uk)(" State: "),"on"===l.getState(e.gpio)?((0,n.wg)(),(0,n.iD)("span",_e,ye)):((0,n.wg)(),(0,n.iD)("span",ke,De))])])])])))),128))])])}var Oe={name:"PumpsView",data(){return{pumps:[{name:"Pump 1",gpio:21},{name:"Pump 2",gpio:19},{name:"Pump 3",gpio:18},{name:"Pump 4",gpio:5}],states:(0,oe.qj)({21:"on",19:"off",18:"on",5:"off"})}},mounted(){this.onLoad()},watch:{$route(){this.onLoad()}},methods:{getState(e){return this.states[e]},onLoad(){this.initWebSocket()},initWebSocket(){console.log("Trying to open a WebSocket connection..."),this.websocket=new WebSocket(`ws://${window.location.hostname}/ws`),this.websocket.onopen=this.onOpen,this.websocket.onclose=this.onClose,this.websocket.onmessage=this.onMessage},onOpen(){console.log("Connection opened"),this.websocket.send("states")},onClose(){console.log("Connection closed"),setTimeout(this.initWebSocket,2e3)},onMessage(e){const t=JSON.parse(e.data);console.log(t);for(const s of t.gpios){const{output:e,state:t}=s;console.log(e),console.log(t),"1"===t?this.states[e]="on":"0"===t&&(this.states[e]="off")}console.log(e.data)},toggleCheckbox(e){console.log(e),this.websocket&&this.websocket.readyState===WebSocket.OPEN?(this.websocket.send(e),this.states[e]?this.states[e]="on":this.states[e]="off"):console.log("WebSocket is not open.")}}};const qe=(0,y.Z)(Oe,[["render",Te]]);var Se=qe,je=s.p+"img/update-logo.png";const Ce={class:"container"},Ee={class:"col-12 mt-3"},Pe=(0,n._)("div",{class:"col-12 mt-3 pt-3 text-center"},[(0,n._)("img",{width:"280",src:je,alt:"ElegantOTA"})],-1),Ae=(0,n._)("div",{class:"col-12"},null,-1),We={key:0,class:"col-12 mt-3 text-center"},Re=(0,n._)("div",{class:"d-flex justify-content-center"},[(0,n._)("div",{class:"spinner-border text-primary",role:"status"},[(0,n._)("span",{class:"visually-hidden"},"Loading...")])],-1),He=[Re],Ue={class:"container"},ze={class:"progress",key:"error"},Ie={class:"col-12 mt-3 pt-2 p-centered",key:"success"},Le={class:"col-12 mt-3 pt-2",key:"otainput"},Ge={class:"col-3 col-sm-9 col-md-6 mx-auto"},Me={class:"form-check form-check-inline mr-2"},Fe=(0,n._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Firmware ",-1),Ze={class:"form-check form-check-inline ml-2"},Xe=(0,n._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Filesystem ",-1),Ye={class:"w-50 mt-3 mx-auto",id:"upload-form"},$e={class:"input-group pt-2 mt-2"},Ve={class:"container"},Ke={key:0,class:"col-12 mt-3 mb-2 pt-2"},Ne={class:"col-2 mt-3 mb-2 col-sm-7 col-md-4 text-right mx-auto"},Be={class:"progress"},Je=["aria-valuenow"],Qe={class:"pt-2 text-center"},et={class:"container"},tt={key:0,class:"columns mt-3"},st={class:"col-12 text-center"},at={class:"badge bg-secondary mr-2"},nt={class:"badge bg-success ml-2"};function ot(e,t,s,o,l,r){return(0,n.wg)(),(0,n.iD)("main",Ce,[(0,n._)("div",Ee,[Pe,Ae,l.loading?((0,n.wg)(),(0,n.iD)("div",We,He)):(0,n.kq)("",!0),(0,n._)("div",Ue,[l.loading||l.uploading||null===l.OTAError?l.loading||l.uploading||!l.OTASuccess?l.loading||l.uploading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Le,[(0,n._)("div",Ge,[(0,n._)("div",Me,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"firmwaretype",id:"flexRadioDefault1","onUpdate:modelValue":t[0]||(t[0]=e=>l.type=e),value:"firmware"},null,512),[[a.G2,l.type]]),Fe]),(0,n._)("div",Ze,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"radio",name:"firmwaretype",id:"flexRadioDefault2","onUpdate:modelValue":t[1]||(t[1]=e=>l.type=e),value:"filesystem"},null,512),[[a.G2,l.type]]),Xe])]),(0,n._)("div",Ye,[(0,n._)("div",$e,[(0,n._)("input",{class:"form-input file-input form-control",type:"file",ref:"fileInput",onChange:t[2]||(t[2]=(...e)=>r.uploadOTA&&r.uploadOTA(...e))},null,544),(0,n._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[3]||(t[3]=(...e)=>r.submit&&r.submit(...e))},"Upload")])])])):((0,n.wg)(),(0,n.iD)("div",Ie)):((0,n.wg)(),(0,n.iD)("div",ze))]),(0,n._)("div",Ve,[!l.loading&&l.uploading?((0,n.wg)(),(0,n.iD)("div",Ke,[(0,n._)("div",Ne,[(0,n._)("div",Be,[(0,n._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-label":"Upload Progress Bar","aria-valuenow":l.progress,"aria-valuemin":"0","aria-valuemax":"100",style:(0,j.j5)({width:l.progress+"%"})},null,12,Je)]),(0,n._)("div",Qe,(0,j.zw)(l.progress)+"%",1)])])):(0,n.kq)("",!0)]),(0,n._)("div",et,[l.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",tt,[(0,n._)("div",st,[(0,n._)("span",at,(0,j.zw)(l.deviceData.id),1),(0,n.Uk)(" - "),(0,n._)("span",nt,(0,j.zw)(l.deviceData.hardware),1)])]))])])])}var lt={data(){return{loading:!0,uploading:!1,progress:0,OTAError:null,OTASuccess:!1,type:"firmware",file:null,deviceData:{id:null,hardware:null}}},methods:{uploadOTA(){this.file=this.$refs.fileInput.files[0]},submit(){this.uploading=!0;const e=new FormData;e.append("file",this.file);const t=new XMLHttpRequest;t.upload.addEventListener("progress",(e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);this.progress=t}})),t.addEventListener("load",(()=>{200===t.status?this.OTASuccess=!0:500!==t.status?this.OTAError=`[HTTP ERROR] ${t.statusText}`:this.OTAError=t.responseText,this.uploading=!1,this.progress=0})),t.withCredentials=!0,t.addEventListener("error",(e=>{console.error(e),this.uploading=!1,this.progress=0})),t.open("POST","/ota-update"),t.send(e)},retryOTA(){this.OTAError=null,this.OTASuccess=!1,this.uploadOTA(null)},clear(){this.OTAError=null,this.OTASuccess=!1}},mounted(){fetch("/update/identity",{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((async e=>{e.ok&&(this.deviceData=await e.json(),this.loading=!1)}))}};const rt=(0,y.Z)(lt,[["render",ot]]);var it=rt;function ct(e,t){return(0,n.wg)(),(0,n.iD)("h1",null,"Teste")}const ut={},dt=(0,y.Z)(ut,[["render",ct]]);var pt=dt;const mt={class:"d-flex align-items-center justify-content-center mt-5"},ht={class:"text-center"},gt=(0,n._)("h1",{class:"display-1 fw-bold"},"404",-1),ft=(0,n._)("p",{class:"fs-3"},[(0,n._)("span",{class:"text-danger"},"Opps!"),(0,n.Uk)(" Page not found.")],-1),vt=(0,n._)("p",{class:"lead"}," The page you’re looking for doesn’t exist. ",-1);function bt(e,t){const s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",mt,[(0,n._)("div",ht,[gt,ft,vt,(0,n.Wm)(s,{to:"/",class:"btn btn-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Go Home")])),_:1})])])}const _t={},wt=(0,y.Z)(_t,[["render",bt]]);var yt=wt;const kt=[{path:"/",name:"home",component:S},{path:"/info",name:"info",component:ie},{path:"/pumps",name:"pumps",component:Se},{path:"/update",name:"update",component:it},{path:"/teste",name:"teste",component:pt},{path:"/:pathMatch(.*)*",name:"notFound",component:yt}],xt=(0,D.p7)({history:(0,D.PO)("/"),routes:kt});var Dt=xt;const Tt=(0,a.ri)(x);Tt.use(Dt),Tt.mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,o){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],o=e[u][2];for(var r=!0,i=0;i<a.length;i++)(!1&o||l>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(r=!1,o<l&&(l=o));if(r){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,l=a[0],r=a[1],i=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(i)var u=i(s)}for(t&&t(a);c<l.length;c++)o=l[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8315)}));a=s.O(a)})();
//# sourceMappingURL=app.js.map